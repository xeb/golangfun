<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Go</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">
		<link rel="stylesheet" href="css/jquery-linedtextarea.css" id="theme">
		<style type="text/css">
			html.start .state-background {
				background: url(img/gopher.png) 70px 400px no-repeat;
				background-size: 400px;
			}
			
			textarea, pre {
				font-family: 'Lucida Grande' !important;
				padding: 10px !important;
				width: 90%;
			}
			textarea {
				background: #FFFFD8;
				font-size: 16px;
			}
			pre {
				background: #fff;
				color: #000;
				font-size: 16px !important;
				overflow: auto;
				position: relative
			}
			pre .system {
				color: #375eab;
			}
			pre .error {
				color: #FF0000;
			}
			pre .delay {
				font-size: 10px;
				color: #ccc;
				position: absolute;
				right: 10px;
			}
			span.hint, span.cite, a.cite {
				font-size: 18px;
				font-weight: normal;
			}
			.runbtn {		
				border: 2px solid #375EAB;
				color: #375EAB;
				font-weight: bold;
				font-size: 20px;
				padding: 5px;
				border-top-left-radius: 5px;
				border-bottom-left-radius: 5px;
				border-top-right-radius: 5px;
				border-bottom-right-radius: 5px;
				cursor: pointer;
				background: #fff;
				-webkit-touch-callout: none;
				-webkit-user-select: none;
				-khtml-user-select: none;
				-moz-user-select: -moz-none;
				-ms-user-select: none;
				user-select: none;
				float: right;
				margin-right: 35px;
			}
			.small {
				font-size: 14px !important;
			}
		</style>

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
 		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<!-- If the query includes 'print-pdf', use the PDF print sheet -->

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section data-state="start">
					<h1>Go</h1>
					<h3>(<a href="http://golang.org" style="line-height: 0.9;">golang</a>)</h3>
					<p>
						<small>Mark Kockerbeck</small><br/>
						<small>{{.Time}}</small><br/>
						<small><a href="http://github.com/xeb/golangfun">github.com/xeb/golangfun</a></small>
					</p>
				</section>
				<section>
					<h2>Why?</h2>
					<ul>
						<li><a href="http://wcs.battle.net/">wcs.battle.net</a></li>
						<li>Robert Griesemer <span class="small">(V8, HotSpot)</span>, </li>
						<li>Rob Pike <span class="small">(UNIX, X11)</span>, </li>
						<li>Ken Thompson <span class="small">(UNIX, UTF-8, regex)</span> and </li>
						<li>Brad Fitzpatrick <span class="small">(LiveJournal, memcached, OpenID)</span></li>
						<li>i386, amd64, ARM</li>
						<li><u>Google!</u></li>
					</ul>
				</section>
				<section>
						<h2>Hello Go!</h2>
<textarea style="height: 290px">
package main;

import "fmt";

func main() {

	var department string;

	department = "Corp Apps";

	fmt.Printf("Hello %s!", department);
}
</textarea>
<pre style="height: 100px;">
</pre>
<span class="hint">if the newline comes after a token that could end a statement, insert a semicolon</span>
<button class="runbtn">Run</button>
					</section>
					<section>
						<h2>Slow it down...</h2>
<textarea style="height: 290px">
package main

import (
	"fmt"
	"time"
)

func main() {

	department := "Corp Apps"
	var sleepDuration time.Duration = 12
	time.Sleep(sleepDuration * time.Millisecond)
	fmt.Printf("Hello %s! I slept for %dms", department, sleepDuration)



	sleepDuration = 15
	time.Sleep(sleepDuration * time.Millisecond)
	fmt.Printf("Hello Again %s! I slept for %s", department, sleepDuration)



	sleepDuration = (30 * time.Hour * 24) + (7 * time.Minute) + (4 * time.Second)
	fmt.Printf("sleepDuration is now %s", sleepDuration)
}
</textarea>
<pre style="height: 100px;">
</pre>
<button class="runbtn">Run</button>
				</section>
				<section>
					<h2>Arrays, Slices and Maps</h2>
<textarea style="height: 250px">
package main

import "fmt"

func main() {

	var intArray []int = []int{ 0, 1, 1, 2, 3, 5, 8, 13, 21 }
	fmt.Printf("intArray[4] == %d", intArray[4])

	intSlice := make([]int, 5, 100) // start with 5, max of 100
	intSlice[4] = intArray[4]
	fmt.Printf("intSlice[4] == %d\tlen(intSlice) == %d", intSlice[4], len(intSlice))



	intSlice = append(intSlice, 34, 55)
	fmt.Printf("intSlice[5] == %d\tlen(intSlice) == %d", intSlice[5], len(intSlice))
	fmt.Printf("intSlice[6] == %d\tlen(intSlice) == %d", intSlice[6], len(intSlice))




	intSlice = append(intSlice, 89, 144)
	fmt.Printf("intSlice[7] == %d\tlen(intSlice) == %d", intSlice[7], len(intSlice))
	fmt.Printf("intSlice[8] == %d\tlen(intSlice) == %d", intSlice[8], len(intSlice))



	statesAndCapitals := make(map[string]string, 50)
	statesAndCapitals["California"] = "Sacremento"
	statesAndCapitals["Arizona"] = "Phoenix"
	statesAndCapitals["Massachusetts"] = "Boston"

	for k, v := range statesAndCapitals {
		fmt.Printf("State %s has a capital of %s", k, v)
	}

}
</textarea>
<pre style="height: 100px;">
</pre>
<button class="runbtn">Run</button>
				</section>
				<section>
					<h2>For and Switch</h2>
<textarea style="height: 250px">
package main

import "fmt"

func main() {
	for i := 0; i &lt; 10; i++ {
		fmt.Printf("i is %d", i)
	}
}
</textarea>
<pre style="height: 100px;">
</pre>
<button class="runbtn">Run</button>
				</section>
				<section>
					<h2>Error Type and _ </h2>
				</section>
				<section>
					<h2>Pointers!</h2>
				</section>
				<section>
					<h2>Custom Types</h2>
<textarea style="height: 290px">
package main

import (
	"fmt"
	"time"
)

type Account struct {
	Id int64
	Name string
	DateCreated time.Time
}

func main() {
	account := &amp;Account{Id: 1234, Name: "Mark", DateCreated: time.Now()}
	newAccount := &amp;account

	accounts := []*Account{ account, *newAccount }

	for i, a := range accounts {
		fmt.Printf("account[%d] == %s", i, a) // variable
		fmt.Printf("*(&amp;account[%d]) == %s", i, *(&amp;a)) // value-at
		fmt.Printf("&amp;account[%d] == %s", i, &amp;a) // address-of
	}
}
</textarea>
<pre style="height: 100px;">
</pre>
<button class="runbtn">Run</button>
				</section>
				<section>
					<h2>Interfaces</h2>
				</section>
				<section>
					<h2>Goroutines</h2>
					<p>The strategy is to "multiplex independently executing functions onto a set of threads"</p>
				</section>
				<section>
					<h2>Channels</h2>
				</section>
				<section>
					<h2>Defer</h2>
<textarea style="height: 290px">
package main

import "fmt"

func main() {
	i := c()
	fmt.Printf("i value is %d", i)
}

func c() (i int) {
    defer func() { i++ }()
    return 1
}

</textarea>
<pre style="height: 100px;">
</pre>
<a class="cite" href="http://blog.golang.org/defer-panic-and-recover">see golang blog</a>
<button class="runbtn">Run</button>
				</section>
				<section>
					<h2>Panic &amp; Recover</h2>

<textarea style="height: 290px">
package main

import "fmt"

func main() {
    f()
    fmt.Println("Returned normally from f.")
}

func f() {
    defer func() {
        if r := recover(); r != nil {
            fmt.Printf("Recovered in f with recovery value %s\n", r)
        }
    }()
    fmt.Println("Calling g.")
    g(0)
    fmt.Println("Returned normally from g.")
}

func g(i int) {
    if i > 3 {
        fmt.Printf("Panicking! (with value %v)\n", i)
        panic(fmt.Sprintf("%v", i))
    }
    defer fmt.Println("Defer in g", i)
    fmt.Println("Printing in g", i)
    g(i + 1)
}
</textarea>
<pre style="height: 100px;">
</pre>
<a class="cite" href="http://blog.golang.org/defer-panic-and-recover">see golang blog</a>
<button class="runbtn">Run</button>
				</section>
				<section>
					<h1>FIN</h1>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		<script src="js/jquery-linedtextarea.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					// { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					// { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					// { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					// { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					// { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>
		<script>
			$(function() {
				$("textarea").keydown(function(e) {
				    if(e.keyCode === 9) { // tab was pressed
				        // get caret position/selection
				        var start = this.selectionStart;
				        var end = this.selectionEnd;

				        var $this = $(this);
				        var value = $this.val();

				        // set textarea value to: text before caret + tab + text after caret
				        $this.val(value.substring(0, start)
				                    + "\t"
				                    + value.substring(end));

				        // put caret at right position again (add one for the tab)
				        this.selectionStart = this.selectionEnd = start + 1;

				        // prevent the focus lose
				        e.preventDefault();
				    }
				})
				// .linedtextarea()
				;				
				$('.runbtn').on("click", function() {
					var btn = $(this);
					btn.attr('disabled', 'disabled');
					btn.val('...');

					var pre = btn.parent().find('pre');
					pre.html('...');
					var val = btn.parent().find('textarea').val();
					$.ajax({
						url: '/compile',
						type: 'POST',
						dataType: 'json',
						data: { version: '2', body: val },
						success: function(d) {
							var errors = d["Errors"];
							if (errors !== undefined && errors != '') {
								$(pre).html('<span class="error">' + errors + '</span>');
							} else {
								var html = '';
								for(var e in d["Events"]) {
									var msg = d["Events"][e]["Message"];
									var delay = d["Events"][e]["Delay"] / 1000 / 1000;
									html += '<span class="message">' + msg + '</span>';
									html += '<span class="delay">' + delay + 'ms</span><br/>';
								}
								$(pre).html(html);
							}
							btn.removeAttr('disabled', 'disabled');
							btn.val('Run');
						}
					});			
				});
				$('span.hint')
					.hide()
					.before('<a class="hint" href="">?</a>')
					;
				$('a.hint').bind('click', function(e) {
					e.preventDefault();
					$(this)
						.next().show()
						.prev().remove()
						;
				});
			});
		</script>

	</body>
</html>
